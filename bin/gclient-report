#!/usr/bin/env bash
#
# Produce a report of git commits for a client


# Set delimiter to space
IFS=' '

RED='\033[0;31m'
GREEN='\033[0;32m'
NO_COLOR='\033[0m'

echo -e "${GREEN}"
read -r -p "Show commits since: " since_date
read -r -p "Show commits until: " until_date
read -r -p "Show for authors (click enter for all): " -a AUTHORS
echo -e "${NO_COLOR}"

authors=()
for author in "${AUTHORS[@]}"; do
  authors+=("--author=$author")
done

printf "%s\n" "$(pwd)"
git log --no-color --since="$since_date" --until="$until_date" "${authors[@]}" \
  --pretty=format:"%ci - %<|(60) %cn - %s" -i | grep -v "Merge"

