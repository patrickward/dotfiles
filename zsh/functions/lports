# Show listening ports with process info
if [ -n "$1" ]; then
    sudo lsof -iTCP:$1 -sTCP:LISTEN -n -P
else
    echo "PORT    PID     USER            COMMAND"
    sudo lsof -iTCP -sTCP:LISTEN -n -P | tail -n +2 | awk '{
        split($9, a, ":");
        printf "%-7s %-7s %-15s %s\n", a[2], $2, $3, $1
    }' | sort -n
fi

