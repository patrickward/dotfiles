# Kill process on port with confirmation
if [ -z "$1" ]; then
    echo "Usage: killport <port>"
    return 1
fi

local port=$1
local info=$(sudo lsof -iTCP:$port -sTCP:LISTEN -n -P 2>/dev/null)

if [ -z "$info" ]; then
    echo "No process found listening on port $port"
    return 1
fi

echo "Process on port $port:"
echo "$info" | tail -n +2 | awk '{
    printf "  PID:     %s\n  Command: %s\n  User:    %s\n", $2, $1, $3
}'

echo -n "\nKill this process? (y/N): "
read response
if [[ ! "$response" =~ ^[Yy]$ ]]; then
    echo "Cancelled"
    return 0
fi

local pids=$(sudo lsof -ti :$port)
echo $pids | xargs sudo kill -9
echo "âœ“ Process killed, port $port freed"

